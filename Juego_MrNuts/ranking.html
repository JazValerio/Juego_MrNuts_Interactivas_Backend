<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ranking</title>

  <link rel="stylesheet" href="css/main.css">

  <!--fonts-->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=ADLaM+Display&display=swap" rel="stylesheet">
</head>
<body>
  <header class="header-section">
    <div class="logo logo-header" href="index.html"></div>
    <nav>
      <ul class="top-nav">
        <li>
          <a class="nav-list-item" href="index.html">
            <i class="icon-home"><img src="img/home.png" alt="home"></i>
            <span>Inicio</span>
          </a>
        </li>
        <li>
          <a class="nav-list-item" href="../../login.php">
            <i class="icon-register"><img src="img/file-text.png" alt="register"></i>
            <span>Login</span>
          </a>
        </li>
        <li>
          <a class="nav-list-item" href="game.html">
            <i class="icon-game"><img src="img/game.png" alt="game"></i>
            <span>Juego</span>
          </a>
        </li>
        <li>
          <a class="nav-list-item" href="ranking.html">
            <i class="icon-ranking"><img src="img/calendar.png" alt=""></i>
            <span>Ranking</span>
          </a>
        </li>
      </ul>
    </nav>
  </header>
  <div class="login-section">
    <div class="black-box">
      <h2 class="title-login">Ranking</h2>
      <p>Top 10 mejores puntuaciones </p>
      <ul id="ranking-list" class="ranking-list">
      </ul>
    </div>
  </div>
  <footer class="footer-section text-white">
    <div class="footer-text">
      <h2>Mr.Nuts</h2>
      <p>Taller del inventor</p>
      <p>&copy; 2024</p>
    </div>
    <div class="footer-icons">
      <a href="#"><i class="icon"><img src="img/map-pin.png" alt="location"></i></a>
      <a href="#"><i class="icon"></i><img src="img/git.png" alt="git"></a>
      <a href="#"><i class="icon"></i><img src="img/mail.png" alt="mail"></a>
    </div>

    <script>
      
      function getDataFromServer() {
        fetch("http://gameplatform.test/top-10.php")
        .then(response => {
          if (!response.ok) {
            throw new Error('response was not ok');
          }
          return response.json();
        })
        .then(data => {
          console.log('Data received:', data);
          printRanking(data);
        })
        .catch(error => {
          console.error('There was a problem with the fetch operation:', error);
        });
      }

      function printRanking(data) {
        data.forEach(item => {
          const listItem = document.createElement('li');
          listItem.classList.add('ranking-item');
          listItem.textContent = `${item.player_name} - ${item.score} puntos`;
          document.getElementById('ranking-list').appendChild(listItem);
        });
      }
      

      getDataFromServer();

    </script>
</body>

</html>